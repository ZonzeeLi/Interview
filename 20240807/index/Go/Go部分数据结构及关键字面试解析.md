# 部分数据结构及关键字面试解析

## String

### String 的底层数据结构是怎么样的

Go 语言中字符串的底层实现是一个结构类型，包含两个字段，一个指向字节数组的指针，另一个是字符串的字节长度。

### 字符串可以被修改吗

字符串不可以被修改。

### []byte 转化为 string 互相转换会发生内存拷贝吗

会发生内存拷贝，所以程序中应避免出现大量的长字符串的这种转换。

## Slice

### Slice 的底层数据结构是怎么样的

slice 的底层实现是一个结构类型，有三个字段：

1. 指向一个数组的指针 Pointer；
2. 切片的长度 len；
3. 切片的容量 cap。

### 从一个切片截取出另一个切片，修改新切片的值会影响原来的切片内容吗

在截取完之后，如果新切片没有触发扩容，则修改切片元素会影响原切片，如果触发了扩容则不会。

### 切片的扩容策略是怎样的

v1.17 及以前

1. 如果期望容量大于当前容量的两倍就会使用期望容量；
2. 如果当前切片的长度小于 1024 就会将容量翻倍；
3. 如果当前切片的长度小于 1024 就会每次增加 25% 的容量，直到新容量大于期望容量；

v1.18 之后

![Go数据结构切片的扩容策略](../image/Go数据结构切片的扩容策略.png)

扩容公式如下：

```
newcap = oldcap + (oldcap + 3 * 256)/4
```