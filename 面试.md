## 面试问题分类

#### WebSocket



### 数据库知识

#### MySQL

##### 1. 索引的类型

- 普通索引：最基本的索引，没有任何约束。

- 唯一索引：与普通索引类似，但具有唯一性约束。

- 主键索引：特殊的唯一索引，不允许有空值。

- 复合索引：将多个列组合在一起创建索引，可以覆盖多个列。

- 外键索引：只有InnoDB类型的表才可以使用外键索引，保证数据的一致性、完整性和实现级联操作。

- 全文索引：MySQL 自带的全文索引只能用于 InnoDB、MyISAM ，并且只能对英文进行全文检索，一般使用全文索引引擎。


#### Redis

##### 1. 如果订阅端挂了怎么办？如果发布的数据过多处理不过来怎么做？如果重复发布怎么办？

##### 2. 缓存中的淘汰策略

1. 定时去清理过期的缓存。
2. 当有用户请求过来时，再判断这个请求所用到的缓存是否过期，过期的话就去底层系统得到新数据并更新缓存。

两者各有优劣，第一种的缺点是维护大量缓存的 key 是比较麻烦的，第二种的缺点就是每次用户请求过来都要判断缓存失效，逻辑相对比较复杂。具体用哪种方案，大家可以根据自己的应用场景来权衡。

- volatile-lru：从已设置过期时间的key中挑选最近最少使用的数据淘汰；

- volatile-ttl：从已设置过期时间的key中挑选将要过期的数据淘汰；

- volatile-random：从已设置过期时间的key中任意选择数据淘汰；

- volatile-lfu：从已设置过期时间的key中挑选使用频率最低的数据淘汰；

- allkeys-lru：从key中挑选最近最少使用的数据淘汰；

- allkeys-lfu：从key中挑选使用频率最低的数据淘汰；

- allkeys-random：从数据集（server.db[i].dict）中任意选择数据淘汰；

- no-enviction（驱逐）

##### 3. 缓存击穿、穿透、雪崩及解决方案

- 击穿

当某个key在某一刻失效，且正好该时刻存在大量的并发请求来访问该key的值，但该key已经不存在，导致查不到的现象。重点是缓冲中没有，但是数据库存在

解决方案

1、缓冲没有的时候，加锁，获取到锁的线程，从数据库取值后set到缓冲，没获取到锁的线程，则先睡眠短暂时间，然后从缓冲取，直接返回。
2、设置热点数据永不过期。

- 穿透

当某个key在某一时刻实现，且正好该时刻存在大量的并发请求来访问该key，该key不存在，则大量的请求来访问数据库，但是数据库也不存在，导致请求都会查询redis和数据库的现象，缓冲中和数据库中都没有，恶性攻击，可以利用这一点，通过脚本大量的发送请求，是你的数据库奔溃。

解决方案

加锁，并且如果数据库不存在，则设置空值，后来的请求拿到空值后，可以判断数据库也没有，则直接返回。

- 雪崩

在某个时间大量的key失效，且正好在该时刻存在大量的请求来访问这些实效的key，导致大量的请求打到数据库的现象。

解决方案

采用版本号，提前更新或者在一定范围随机设置key的实效时间，将失效时间打散。


#### NoSQL

##### 1. NoSQL的优缺点？

&emsp;优点

- 高可扩展性
- 分布式计算
- 低成本
- 架构的灵活性，半结构化数据
- 没有复杂的关系

&emsp;缺点

- 没有标准化
- 有限的查询功能（到目前为止）
- 最终一致是不直观的程序

### 分布式

##### 1. 分布式计算的优缺点有哪些？

&emsp;优点

- 可靠性（容错）：分布式计算系统中的一个重要的优点是可靠性。一台服务器的系统崩溃并不影响到其余的服务器。
- 可扩展性：在分布式计算系统可以根据需要增加更多的机器。
- 资源共享：共享数据是必不可少的应用，如银行，预订系统。
- 灵活性：由于该系统是非常灵活的，它很容易安装，实施和调试新的服务。
- 更快的速度：分布式计算系统可以有多台计算机的计算能力，使得它比其他系统有更快的处理速度。
- 开放系统：由于它是开放的系统，本地或者远程都可以访问到该服务。
- 更高的性能：相较于集中式计算机网络集群可以提供更高的性能（及更好的性价比）。

&emsp;缺点

- 故障排除：故障排除和诊断问题。
- 软件：更少的软件支持是分布式计算系统的主要缺点。
- 网络：网络基础设施的问题，包括：传输问题，高负载，信息丢失等。
- 安全性：开放系统的特性让分布式计算系统存在着数据的安全性和共享的风险等问题。

#### 消息队列

##### 1. RabbitMQ如何确保正确的将消息发送到队列中

发送方确认模式：将信道设置成 confirm 模式（发送方确认模式），则所有在信道上发布的消息都会被指派一个唯一的 ID 。一旦消息被投递到目的队列后，或者消息被写入磁盘后（可持久化的消息），信道会发送一个确认给生产者（包含消息唯一ID）。如果 RabbitMQ 发生内部错误从而导致消息丢失，会发送一条 nack（not acknowledged，未确认）消息。
发送方确认模式是异步的，生产者应用程序在等待确认的同时，可以继续发送消息。当确认消息到达生产者应用程序，生产者应用程序的回调方法就会被触发来处理确认消息。

### 工具

#### Docker

#### Kubernetes

#### Git

